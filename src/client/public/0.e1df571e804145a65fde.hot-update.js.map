{"version":3,"sources":["webpack:///./src/client/app/CameraComponent.jsx?300a"],"names":[],"mappings":"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","file":"0.e1df571e804145a65fde.hot-update.js","sourcesContent":["import React from 'react';\n\nexport default class CameraComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoElement = React.createElement(\"video\");\n    this.audioSelect = React.createElement(\"select\");\n    this.videoSelect = React.createElement(\"select\");\n    this.state = {\n      captures : []\n    };\n    //this.initElements();\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n    if (typeof MediaStreamTrack === 'undefined' ||\n        typeof MediaStreamTrack.getSources === 'undefined') {\n      alert('This browser does not support MediaStreamTrack.\\n\\nTry Chrome.');\n    } else {\n      MediaStreamTrack.getSources(this.gotSources);\n    }\n\n    //this.start();\n\n\n  }\n\n  /*\n  initElements() {\n    this.state.video = document.createElement(\"video\");\n    this.state.audioSelect = document.createElement(\"select\");\n    this.state.audioSelect = document.createElement(\"select\");\n  }\n  */\n\n  componentWillMount() {\n    this.start()\n  }\n  \n  gotSources(sourceInfos) {\n    for (var i = 0; i !== sourceInfos.length; ++i) {\n      var sourceInfo = sourceInfos[i];\n      var option = document.createElement('option');\n      option.value = sourceInfo.id;\n      if (sourceInfo.kind === 'audio') {\n        option.text = sourceInfo.label || 'microphone ' +\n          (this.audioSelect.length + 1);\n        this.audioSelect.appendChild(option);\n      } else if (sourceInfo.kind === 'video') {\n        option.text = sourceInfo.label || 'camera ' + (this.videoSelect.length + 1);\n        this.videoSelect.appendChild(option);\n      } else {\n        console.log('Some other kind of source: ', sourceInfo);\n      }\n    }\n  }\n\n\n  successCallback(stream) {\n    window.stream = stream; // make stream available to console\n    this.videoElement.src = window.URL.createObjectURL(stream);\n    this.videoElement.play();\n  }\n\n  errorCallback(error) {\n    console.log('navigator.getUserMedia error: ', error);\n  }\n\n  start() {\n    if (window.stream) {\n      this.videoElement.src = null;\n      window.stream.stop();\n    }\n    var audioSource = this.audioSelect.value;\n    var videoSource = this.videoSelect.value;\n    var constraints = {\n      audio: {\n        optional: [{\n          sourceId: audioSource\n        }]\n      },\n      video: {\n        optional: [{\n          sourceId: videoSource\n        }]\n      }\n    };\n    navigator.getUserMedia(constraints, this.successCallback, this.errorCallback);\n  }\n\n\n  captureImage() {\n    var scale = this.props.scale;\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = this.videoElement.videoWidth * scale;\n    canvas.height = this.videoElement.videoHeight * scale;\n    canvas.getContext('2d')\n          .drawImage(this.videoElement, 0, 0, canvas.width, canvas.height);\n\n    var img = document.createElement(\"img\");\n    img.src = canvas.toDataURL();\n    //document.querySelector('#output').appendChild(img);\n    this.state.captures.push(img);\n  }\n\n  render() {\n    return (\n      <div>\n        {this.videoElement}\n        <button id=\"capture\" onClick={this.captureImage}>Capture</button>\n        <div id=\"output\">\n          {this.state.captures.map(function(img){\n            return img;\n          })}\n        </div>\n      </div>\n    );\n  }\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/app/CameraComponent.jsx\n **/"],"sourceRoot":""}