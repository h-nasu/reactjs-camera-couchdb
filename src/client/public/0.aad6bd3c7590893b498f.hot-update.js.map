{"version":3,"sources":["webpack:///./src/client/app/CameraComponent.jsx?300a"],"names":[],"mappings":"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","file":"0.aad6bd3c7590893b498f.hot-update.js","sourcesContent":["import React from 'react';\n\nexport default class CameraComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    //this.onChange = this.onChange.bind(this);\n    //this.videoElement = React.createElement(\"video\");\n    this.gotSources = this.gotSources.bind(this);\n    this.successCallback = this.successCallback.bind(this);\n    this.audioSelect = [];\n    this.videoSelect = [];\n    this.state = {\n      videoSrc: '',\n      captures: []\n    };\n    //this.initElements();\n    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n    if (typeof MediaStreamTrack === 'undefined' ||\n        typeof MediaStreamTrack.getSources === 'undefined') {\n      alert('This browser does not support MediaStreamTrack.\\n\\nTry Chrome.');\n    } else {\n      MediaStreamTrack.getSources(this.gotSources);\n    }\n\n    //this.start();\n\n\n  }\n\n  /*\n  initElements() {\n    this.state.video = document.createElement(\"video\");\n    this.state.audioSelect = document.createElement(\"select\");\n    this.state.audioSelect = document.createElement(\"select\");\n  }\n  */\n\n  componentDidMount() {\n    this.start()\n  }\n  \n  gotSources(sourceInfos) {\n    for (var i = 0; i !== sourceInfos.length; ++i) {\n      var sourceInfo = sourceInfos[i];\n      if (sourceInfo.kind === 'audio') {\n        this.audioSelect.push(sourceInfo.id);\n      } else if (sourceInfo.kind === 'video') {\n        this.videoSelect.push(sourceInfo.id);\n      } else {\n        console.log('Some other kind of source: ', sourceInfo);\n      }\n    }\n  }\n\n\n  successCallback(stream) {\n    window.stream = stream; // make stream available to console\n    this.setState({videoSrc: window.URL.createObjectURL(stream)});\n    this._video.play();\n    console.log(this.audioSelect);\n    console.log(this.videoSelect);\n    //this.videoElement.play();\n  }\n\n  errorCallback(error) {\n    console.log('navigator.getUserMedia error: ', error);\n  }\n\n  start() {\n    if (window.stream) {\n      this.state.videoSrc = null;\n      window.stream.stop();\n    }\n    var audioSource = this.audioSelect[0];\n    //var audioSource = 0;\n    var videoSource = this.videoSelect[0];\n    var constraints = {\n      audio: {\n        optional: [{\n          sourceId: audioSource\n        }]\n      },\n      video: {\n        optional: [{\n          sourceId: videoSource\n        }]\n      }\n    };\n    navigator.getUserMedia(constraints, this.successCallback, this.errorCallback);\n  }\n\n\n  captureImage() {\n    var scale = this.props.scale;\n    var canvas = document.createElement(\"canvas\");\n    canvas.width = this.videoElement.videoWidth * scale;\n    canvas.height = this.videoElement.videoHeight * scale;\n    canvas.getContext('2d')\n          .drawImage(this.videoElement, 0, 0, canvas.width, canvas.height);\n\n    var img = document.createElement(\"img\");\n    img.src = canvas.toDataURL();\n    //document.querySelector('#output').appendChild(img);\n    this.state.captures.push(img);\n  }\n\n  render() {\n    return (\n      <div>\n        <video muted=\"\" autoplay=\"\" ref={(r) => this._video = r} src={this.state.videoSrc}></video>\n        <button id=\"capture\" onClick={this.captureImage}>Capture</button>\n        <div id=\"output\">\n          {this.state.captures.map(function(img){\n            return img;\n          })}\n        </div>\n      </div>\n    );\n  }\n\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/client/app/CameraComponent.jsx\n **/"],"sourceRoot":""}